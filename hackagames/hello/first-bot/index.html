<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>First Bot - HackaGames</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "First Bot";
        var mkdocs_page_input_path = "hello/first-bot.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> HackaGames
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../../..">ktorz <</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">First-Steps</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../install/">Install</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">First Bot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../multi-player/">Multiplayer</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Games</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../games/py421/">Py4.2.1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../games/zombuilding/">Zomb'Building</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../games/connect4/">Connect4</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../games/tictactoe/">TicTacToe</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tuto: Learning</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../learning/policy/">Policy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learning/qlearning/">Q-Learning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learning/speed-up/">Speed-up</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learning/model-based/">Model Based</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tiled Game</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tiled-land/pickndel/">Pick'n Del</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Under the hood</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../hood/api/">Protocol API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hood/pod/">Pod Class</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hood/newgame/">New Game</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hood/testdriven/">Test-Driven</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../resources/policy.zip"></a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../resources/learning.zip"></a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../resources/pickndel.zip"></a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">HackaGames</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">First-Steps</li>
      <li class="breadcrumb-item active">First Bot</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="first-bot">First Bot</h1>
<p>In this tutorial, we will learn about how the games and the players/bots communicate together. 
In Hackagames several players can play simultaneously to games. </p>
<p>That for, the loop control of the program is handled by the game.
Then, the player bots have to generate the appropriate responses to situations.</p>
<h2 id="initialize-a-bot-environment">Initialize a Bot environment</h2>
<p>First, let implement a simple script, instantiating a game and a player.</p>
<pre><code class="language-python">from hackagames.py421 import GameMaster
from py421bot import FirstBot

# Instanciate Game-Master (handling the game and the players) and a bot player
gameMaster= GameMaster(&quot;Solo&quot;)
bot= FirstBot()

# Start 1000 games with your bot:
results= gameMaster.launchLocal( [bot], 1000 )

# And analyze the result:
botResults= results[0]
print( f&quot;Average score: {sum(botResults)/len(botResults)}&quot; )
</code></pre>
<p>This script starts <span class="arithmatex">\(1000\)</span> games with <em>bot</em> an instance of a <code>FirstBot</code> as main player.
It returns the average endgame results of <em>bot</em>.</p>
<p>At this point your script should not work, we need to create our <code>FirstBot</code> bot class, into a <code>py421bot.py</code> file.</p>
<h2 id="initialize-your-first-bot-ie-an-autonomous-player">Initialize your First Bot, i.e. an Autonomous Player</h2>
<p>A <code>hackagames</code>-formatted <code>Bot</code> is a class, implementing <span class="arithmatex">\(4\)</span> specific methods: <code>wakeUp</code>, <code>perceive</code>,<code>decide</code> and <code>sleep</code>. <code>wakeUp</code> takes as parameters the initial configuration of a game, <code>perceive</code> the evolutive game state, and <code>sleep</code> the final result of the game.
The method <code>decide</code> does not take any parameter, but it should return the bot action.</p>
<p>The informations transiting between games and bots are formated as <code>Pod</code> (PieaceOfData), an <em>hackaGames</em> feature.</p>
<p>So, the minimal <code>Bot</code> implementation should be (in a new <code>py421bot.py</code> file):</p>
<pre><code class="language-python">from hacka import Pod

class FirstBot :
    # Player interface :
    def wakeUp(self, playerId, numberOfPlayers, gameConf):
        pass

    def perceive(self, gameState):
        pass

    def decide(self):
        return Pod('keep-keep-keep')

    def sleep(self, result):
        pass
</code></pre>
<h2 id="multi-files-structuration">Multi-Files structuration</h2>
<p>It is encuraged to work on your own computer with your favoryte <em>Python IDE</em>. 
As so, you should distribute your code into several files: </p>
<ul>
<li><code>py421Bot.py</code>, with the implementation of your Bot classes ( <code>FirstBot</code> as a first class).</li>
<li><code>py421-launch.py</code>, the script instanciating a game-master and a bot player (and starting with a <code>from py421Bot import FirstBot</code>).</li>
<li><code>README.md</code>, the simple text description of this directory (in <a href="https://fr.wikipedia.org/wiki/Markdown">markdown</a> syntaxe)</li>
</ul>
<p>For instance for your <code>README.md</code>: </p>
<pre><code class="language-markdown"># Tutorial Of HackaGames

This directory regroup my realization by following the tutorial of [hackagames](https://ktorz-net.github.io/hackagames).

## Structuration: 

- `py421Bot.py`, The implementation of my Bot for the 421 game.
- `py421-launch.py`, the script to test a bot on the 421 game.
</code></pre>
<p>Then you can increase your file collection, following the tutorials with a strategy: one file - one functionnality.</p>
<p>If you are in a web-based Python IDE like <a href="colab.research.google.com">Google Colab</a>, the <code>py421-launch.py</code> matches your jupiter notebook and the other file can be created aside.</p>
<h2 id="understand-bot-methods">Understand Bot methods :</h2>
<p>Games and Bots rely on the <code>hacka</code> library, to exchange information about the game and the players' intentions (game configuration, game states and decisions).
The players can be human interfaces or bots.</p>
<h3 id="game-loop">Game Loop:</h3>
<p>A game mainly relies on <code>perceive</code> and <code>decide</code> capability for players and bots to update the information about the game and to ask for player action.</p>
<p>The <code>perceive</code> method has <span class="arithmatex">\(1\)</span> argument: the <code>gameState</code>, the current configuration of the game from the point of view of the player.
In fact, <code>gameState</code> can be different from one player to another in multiplayer games with partial observation (typically card games). In our example (421), there is only one player with the full information about the game.</p>
<p>So the basic configuration of <code>Py421</code> (<em>Solo</em> mode), the <code>gameState informs about the $3$ dice values and the horizon counter (the number of remaining roll-again possibilities).
The</code>gameState<code>read and associate to the bot instance</code>self` is as follows:</p>
<pre><code class="language-python">def perceive(self, gameState):
    self._horizon= gameState.child(1).integer(1)
    self._dices= gameState.child(2).integers()
    self._score= gameState.child(2).value(1)
</code></pre>
<p>The <code>decide</code> method has no argument, but should return the player action. 
The action is formatted as a string.
<code>decide</code> is always triggered after at least one <code>perceive</code> call.
So, the bot instance <code>self</code> as all the required informations to process a decision.</p>
<p>For instance, in <code>FirstBot</code>, we can keep the <span class="arithmatex">\(4.2.1\)</span> combination and roll the others.</p>
<pre><code class="language-python">def decide( self ):
    stateString= f&quot;{self._horizon} - {self._dices} ({self._score})&quot;
    action= 'roll-roll-roll'
    if self._dices == [4, 2, 1] :
        action= &quot;keep-keep-keep&quot;
    return Pod(action)
</code></pre>
<p>As a result, this new <code>decide</code> method should statistically increase the obtained scores on <span class="arithmatex">\(1000\)</span> games.
It is possible to add a <code>print( stateString + ": "+ action )</code> to check each decision before the return instruction.</p>
<h3 id="multiple-games">Multiple Games :</h3>
<p>Furthermore, A GameMaster can start several games sequentially. 
Therefore, the methods <code>wakeUp</code> and <code>sleep</code> are triggered respectively when a new game is started and stopped. 
They are triggered <code>100</code> times in our script.
During a game, players are activated at turn with the <code>perceive</code> and the <code>decide</code> methods.</p>
<p>The <code>wakeUp</code> has <span class="arithmatex">\(3\)</span> arguments: <code>playerId</code>, <code>numberOfPlayers</code>, <code>gameConf</code> informing in the place of the player in the game, the number of players and the initial configuration.
At this stage, there is no information to get from  <code>playerId</code>, <code>numberOfPlayers</code> and <code>gameConf</code> in <em>Py421</em>, into <em>Solo</em> mode.</p>
<p>Finally, the <code>sleep</code> informs about the obtained score with its argument <code>result</code>. 
The score is computed for the player regarding the ending game. 
In <em>Py421</em> into <em>Solo</em> mode, the <code>result</code> matches the final combination value.</p>
<ul>
<li>You have to try to increase decisions to increase average scores after <span class="arithmatex">\(1000\)</span> games.</li>
</ul>
<h3 id="pod-hackas-piece-of-data">Pod - Hacka's Piece-Of-Data :</h3>
<p>The method arguments <code>gameConf</code> and <code>gameState</code> as the expected return of <code>decide</code> method are formatted as <em>hacka.Pod</em> (Piece Of Data), a tree data structure packing integers, values, and strings data.
It is not required to understand <em>Pod</em>.
Examples are always provided to get the game information from <em>Pod</em>.
However, you can go to the <strong>Under the hood - Pod</strong> page for more detail on this core element of <em>HackaGames</em>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../install/" class="btn btn-neutral float-left" title="Install"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../multi-player/" class="btn btn-neutral float-right" title="Multiplayer">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../install/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../multi-player/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../javascripts/mathjax.js"></script>
      <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
