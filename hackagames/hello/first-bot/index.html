<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>First Bot - HackaGames</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../../style.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">HackaGames</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">ktorz <</a>
                            </li>
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">First-Steps <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../install/" class="dropdown-item">Install</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">First Bot</a>
</li>
                                    
<li>
    <a href="../multi-player/" class="dropdown-item">Multi-Player</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Games <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../games/py421/" class="dropdown-item">Py4.2.1</a>
</li>
                                    
<li>
    <a href="../../games/connect4/" class="dropdown-item">Connect4</a>
</li>
                                    
<li>
    <a href="../../games/tictactoe/" class="dropdown-item">TicTacToe</a>
</li>
                                    
<li>
    <a href="../../games/risky/" class="dropdown-item">Risky</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Learnning <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../learning/policy/" class="dropdown-item">Policy</a>
</li>
                                    
<li>
    <a href="../../learning/qlearning/" class="dropdown-item">Q-Learning</a>
</li>
                                    
<li>
    <a href="../../learning/learn-model/" class="dropdown-item">Learn Model</a>
</li>
                                    
<li>
    <a href="../../learning/decision-tree/" class="dropdown-item">Decision Tree</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Under the hood <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../hood/api/" class="dropdown-item">Protocol API</a>
</li>
                                    
<li>
    <a href="../../hood/pod.md" class="dropdown-item">Pod Class</a>
</li>
                                    
<li>
    <a href="../../hood/newgame/" class="dropdown-item">New Game</a>
</li>
                                    
<li>
    <a href="../../hood/testdriven/" class="dropdown-item">Test-Driven</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../f.a.q/" class="nav-link">F.A.Q</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../install/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../multi-player/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#first-bot" class="nav-link">First Bot</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#initialize-a-bot-environment" class="nav-link">Initialize a Bot environment</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#initialize-a-bot-ie-an-autonomous-player" class="nav-link">Initialize a Bot, i.e. an Autonomous Player</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#understand-bot-methods" class="nav-link">Understand Bot methods :</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="first-bot">First Bot</h1>
<p>In this tutorial, we will learn about how the games and the players/bots communicate together. 
In Hackagames several players can play simultaneously to games. </p>
<p>That for, the loop control of the program is handled by the game.
Then, the player bots have to generate the appropriate responses (string formed actions) to situations.
To do so, a player bot can re-implement the 4 expected methods: <code>wakeUp</code>, <code>perceive</code>, <code>decide</code> and <code>sleep</code>.</p>
<h2 id="initialize-a-bot-environment">Initialize a Bot environment</h2>
<p>First let implement a simple script, instantiating a game and a player.</p>
<p>Put the next code into a script file <code>launch-py421.py</code>.</p>
<pre><code class="language-python"># Import a game and player(s):
from hacka.games.py421 import GameSolo as Game
from hacka.games.py421.firstBot import Bot

# Instanciate them:
game= Game()
bot= Bot()

# Start 1000 games on a player to test:
results= game.testPlayer( bot, 1000 )

# And analyze the result:
print( f&quot;Average score: {sum(results)/len(results)}&quot; )
</code></pre>
<p>This script import <code>py421.py</code> game and a <em>bot</em>, then it starts <span class="arithmatex">\(1000\)</span> games with that <em>bot</em> as main player.
It return the 1000 end game results of <em>bot</em>.</p>
<p>Test it in a terminal:</p>
<pre><code class="language-sh">python3 launch-py421.py
</code></pre>
<h2 id="initialize-a-bot-ie-an-autonomous-player">Initialize a Bot, i.e. an Autonomous Player</h2>
<p>For playing <code>py421.py</code>, our script must implement an <code>hackagames</code> formated <code>Bot</code>.</p>
<p>A first simple solution consists in modifying the one proposed by the <em>Py421 HackaGames</em>.
<em>Py421 FirstBot</em>.
 <em>Py421 FirstBot</em> plays randomly, an interesting update should be to score each time a <span class="arithmatex">\(4 2 1\)</span> is reached :</p>
<pre><code class="language-python">import random
import hacka.games.py421.firstBot as firstBot

# Setup a bot:
class MyBot( firstBot.Bot ) :
    def decide( self ):
        if self.dices() == [4, 2, 1] :
            return &quot;keep-keep-keep&quot;
        return random.choice( self.actions() )
</code></pre>
<p>Replace the <code># Setup a player:</code> section into your <code>launch-py421.py</code> script and try your bot. 
The average score should be increased.</p>
<h2 id="understand-bot-methods">Understand Bot methods :</h2>
<p>Games and Bots rely on <code>hacka.pylib</code> library, to exchange information about the game and the player intentions.</p>
<h3 id="game-loop">Game Loop:</h3>
<p>A game mainly relies on <code>perceive</code> and <code>decide</code> capability for players and bots to update the information about the game and to ask for player action.</p>
<p>The <code>perceive</code> method gives <span class="arithmatex">\(1\)</span> argument: a <code>gameState</code>, the current game state from the point of view of the player.
In fact <code>gameState</code> can be different from a player to another in multiplayer games with partial observation (typically: card games).
In the basic configuration of <code>Py421</code>, there is only one player and the <code>gameConf</code> informs about the 3 dice values and the horizon counter (the number of remaining roll again possibilities).</p>
<p>The <code>decide</code> method does not have an argument, but should return the player action. 
<code>decide</code> is always triggered after one or several <code>perceive</code>.
The action is formatted as a string.</p>
<h3 id="game-server">Game Server :</h3>
<p>Furthermore, A Game server can start several games sequentially. 
That for, the method <code>wakeUp</code> and <code>sleep</code> are triggered respectively when a new game is started and stopped. 
There are triggered <code>1000</code> times in our script.
During a Game's game, players are activated at turn with <code>perceive</code> and <code>decide</code> method </p>
<p>The <code>wakeUp</code> has <span class="arithmatex">\(3\)</span> parameters: <code>playerId</code>, <code>numberOfPlayers</code>, <code>gameConf</code> informing in the place of the player in the game, the number of players and the initial configuration.
At this stage, there is no information to get from <code>gameConf</code> in <code>Py421</code>.</p>
<p>Finally, the <code>sleep</code> inform about the obtained score with it parameters <code>result</code>. 
The score is computed for the player regarding the ending game.</p>
<h3 id="example-of-first-py421-bot">Example of first py421 Bot :</h3>
<p>As an example, this next Bot is a verbose version for "Py421" playing randomly:</p>
<pre><code class="language-python">import random 

class Bot :

    # Player interface :
    def wakeUp(self, playerId, numberOfPlayers, gameConf):
        print( f'---\nWake-up player-{playerId} ({numberOfPlayers} players)')
        print( &quot;conf: &quot; + str(gameConf) )

    def perceive(self, gameState):
        self._horizon= gameState.child(1).flag(1)
        self._dices= gameState.child(2).flags()
        self._score= gameState.child(2).value(1)
        print( f'\t&gt; H: {self._horizon}, DICES: {self._dices}, SCORE: {self._score}' )

    def decide(self):
        actions= ['keep-keep-keep', 'keep-keep-roll', 'keep-roll-keep', 'keep-roll-roll',
            'roll-keep-keep', 'roll-keep-roll', 'roll-roll-keep', 'roll-roll-roll' ]
        action= random.choice( actions )
        print( f'\t&lt; Action: {action}' )
        return action

    def sleep(self, result):
        print( f'--- Results: {str(result)}' )
</code></pre>
<p>To notice that the parameters <code>gameConf</code> and <code>gameState</code> are formated as <em>hackapy.Pod</em> (Piece Of Data), a tree data structure.
It is not required to understand <em>Pod</em>.
Examples are always provided to get the game information from <em>Pod</em>.
However, you can go on <strong>Under the hood - Pod</strong> page for more detail on this core element of <em>HackaGames</em>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../javascripts/mathjax.js"></script>
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
