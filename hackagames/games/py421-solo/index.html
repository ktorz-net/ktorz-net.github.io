<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Py421, Solo Mode - HackaGames</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../../style.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">HackaGames</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">ktorz <</a>
                            </li>
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">First-Steps <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../hello/install/" class="dropdown-item">Install</a>
</li>
                                    
<li>
    <a href="../../hello/first-bot/" class="dropdown-item">First Bot</a>
</li>
                                    
<li>
    <a href="../../hello/multi-player/" class="dropdown-item">Multi-Player</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Games <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../py421/" class="dropdown-item">Py4.2.1</a>
</li>
                                    
<li>
    <a href="../connect4/" class="dropdown-item">Connect4</a>
</li>
                                    
<li>
    <a href="../tictactoe/" class="dropdown-item">TicTacToe</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Learnning <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../learning/policy/" class="dropdown-item">Policy</a>
</li>
                                    
<li>
    <a href="../../learning/qlearning/" class="dropdown-item">Q-Learning</a>
</li>
                                    
<li>
    <a href="../../learning/learn-model/" class="dropdown-item">Learn Model</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Under the hood <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../hood/api/" class="dropdown-item">Protocol API</a>
</li>
                                    
<li>
    <a href="../../hood/pod.md" class="dropdown-item">Pod Class</a>
</li>
                                    
<li>
    <a href="../../hood/newgame/" class="dropdown-item">New Game</a>
</li>
                                    
<li>
    <a href="../../hood/testdriven/" class="dropdown-item">Test-Driven</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../f.a.q/" class="nav-link">F.A.Q</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#py421-solo-mode" class="nav-link">Py421, Solo Mode</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#try-the-game" class="nav-link">Try the game:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#initialize-an-autonomous-player" class="nav-link">Initialize an Autonomous Player</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#test-your-player" class="nav-link">Test your Player</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#make-your-own-autonomous-player" class="nav-link">Make Your Own Autonomous Player:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="py421-solo-mode">Py421, Solo Mode</h1>
<p><strong>Py421</strong> is an <em>HackaGames</em> game, a simple dice game where players try to optimize their dices combination after a maximum of 2 roll dice steps.</p>
<p>This tutorial is based only on <strong>Python3</strong>.</p>
<h2 id="try-the-game">Try the game:</h2>
<p>The <code>play/py421</code> script starts the game with an interactive interface in a shell.</p>
<pre><code class="language-sh">python3 hackagames/play/py421
</code></pre>
<p><strong>Py421</strong> is a 3-dice game. The player can roll several times to get a combination.
The player can perform one and only one action on his turn, and the game stops automatically after 2 turns.</p>
<p>The actions consist in keeping or rolling each of the 3 dices. So there are 8 possible actions:</p>
<ul>
<li><code>keep-keep-keep</code>,  <code>keep-keep-roll</code>,  <code>keep-roll-keep</code>,  <code>keep-roll-roll</code>, <code>roll-keep-keep</code>,  <code>roll-keep-roll</code>,  <code>roll-roll-keep</code> and <code>roll-roll-roll</code></li>
</ul>
<p>The goal is to optimize the combination of dices before the end of the 2 turns.
The best combination ever is <strong>4-2-1</strong> for <strong>800</strong> points.
But you can explore other combinations.</p>
<h2 id="initialize-an-autonomous-player">Initialize an Autonomous Player</h2>
<p>In your workspace, we encourage you to create a new directory for your experiences linked to our tutorials (<code>tutos</code> for instance, aside from <code>hackagames</code> directory),
and to create your new <strong>Py421</strong> player in this directory.</p>
<pre><code>mkdir tutos
touch tutos/myPy421Bot.py
</code></pre>
<p>You now have to edit <code>myPy421Bot.py</code> script and create a <strong>Py421</strong> player.</p>
<h3 id="player-script-architecture">Player Script Architecture</h3>
<p>The script must begin by importing hackagames elements (<code>hackapy</code>) and implement an <code>hackagames Abstract Player</code>.</p>
<p>To import <code>hackapy</code> you have first to modify the python path resource to add your workspace directory (i.e. the directory including tutos in which your AI is positioned).</p>
<pre><code class="language-python"># Local HackaGame:
import sys
sys.path.insert( 1, __file__.split('tutos')[0] )

import hackagames.hackapy as hg
</code></pre>
<p>The first proposed script selects a random action and also requires the adequate python tool:</p>
<pre><code class="language-python">import random
</code></pre>
<p>Then your first player will inherit from hackay Abstract Player and implement the <code>4</code> player methods <code>wakeUp</code>, <code>perceive</code>, <code>decide</code> and <code>sleep</code> required to play any Hackagames's game :</p>
<pre><code class="language-python">class AutonomousPlayer( hg.AbsPlayer ) :

    # Player interface :
    def wakeUp(self, playerId, numberOfPlayers, gameConf):
        [...]

    def perceive(self, gameState):
        [...]

    def decide(self):
        [...]

    def sleep(self, result):
        [...]
</code></pre>
<p>It is possible to add an extra <span class="arithmatex">\(4\)</span> lines to permit <code>myPy421Bot.py</code> file to connect a player when it is executed.
This script section is activated only if the file is the main Python entrance.
When you interpret it <code>python3 myPy421Bot.py</code> rather than import it into another code.</p>
<pre><code class="language-python"># script :
if __name__ == '__main__' :
    player= AutonomousPlayer()
    results= player.takeASeat()
    print( f&quot;Results: {results}&quot; )
</code></pre>
<h3 id="a-bot-for-py421-solo">A Bot for Py421 Solo</h3>
<p>A first version of <code>myPy421Bot.py</code> player could be copied from the <code>hackagames/gamePy421/playerFirstAI</code>, 
and your final first script would be:</p>
<pre><code class="language-python"># Local HackaGame:
import sys
sys.path.insert( 1, __file__.split('tutos')[0] )

import hackagames.hackapy as hg
import random

class AutonomousPlayer( hg.AbsPlayer ) :

    # Player interface :
    def wakeUp(self, playerId, numberOfPlayers, gameConf):
        print( f'---\nWake-up player-{playerId} ({numberOfPlayers} players)')
        print( gameConf )

    def perceive(self, gameState):
        self.horizon= gameState.child(1).flag(1)
        self.dices= gameState.child(2).flags()
        print( f'H: {self.horizon} DICES: {self.dices}' )

    def decide(self):
        actions= ['keep-keep-keep', 'keep-keep-roll', 'keep-roll-keep', 'keep-roll-roll',
            'roll-keep-keep', 'roll-keep-roll', 'roll-roll-keep', 'roll-roll-roll' ]
        action= random.choice( actions )
        print( f'Action: {action}' )
        return action

    def sleep(self, result):
        print( f'--- Results: {str(result)}' )

# script :
if __name__ == '__main__' :
    player= AutonomousPlayer()
    results= player.takeASeat()
    print( f&quot;Results: {results}&quot; )
</code></pre>
<h2 id="test-your-player">Test your Player</h2>
<p><em>HackaGames</em> is designed to work as a client-server architecture to make the game and the players completely independent.
Each one in it own process and potentially on different machines.
So the classical way to test your autonomous player is to start a game server then to launch your bot in separated shells.</p>
<pre><code class="language-sh"># In a first shell:
python3 hackagames/gamePy421/start-server

# In a second shell:
python3 tutos/myPy421Bot.py

</code></pre>
<h2 id="make-your-own-autonomous-player">Make Your Own Autonomous Player:</h2>
<p>To notice that method parameters are referencing <code>hackapy</code> objects (Pod) not presented in this tutorial.
The perception already records the game variables <code>horizon</code> (the number of remaining roll-again) and <code>dices</code> (a list of the 3 dices values) into instance attributes.</p>
<p>Actually in <code>decide</code> method, an action is chosen randomly, the goal now is to propose heuristic choice of actions to optimize average score over <code>10000</code> games.
As a minimal start, it is possible to force a stop action (action <code>keep-keep-keep</code>) each time the player reaches a good combination (<code>4-2-1</code> or <code>1-1-1</code> for instance).</p>
<p>The <code>takeASeat</code> method return the list game results.
We can now print and analyze the reached results (compute the average score for instance): </p>
<pre><code class="language-python">    # Analysis
    average= sum(results)/len(results)
    print( f&quot;Average score: {average}&quot;)
</code></pre>
<p>A game server command takes a specific number of games to play with the option <code>-n</code>:</p>
<pre><code class="language-sh"># In a first shell:
python3 hackagames/gamePy421/start-server -n 10000

</code></pre>
<p>As a minimal start, it is possible to force a stop action (action <code>keep-keep-keep</code>) each time the player reaches a good combination (<code>4-2-1</code> or <code>1-1-1</code> for instance).
Then you can progressively try to optimize the decisions in order to target those 2 combinations.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../javascripts/mathjax.js"></script>
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
