<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Risky - HackaGames</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../../style.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">HackaGames</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">ktorz ></a>
                            </li>
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../journeys/" class="nav-link">Journeys</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">First-Steps <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../hello/00-install/" class="dropdown-item">Install</a>
</li>
                                    
<li>
    <a href="../../hello/01-first-bot/" class="dropdown-item">First Bot</a>
</li>
                                    
<li>
    <a href="../../hello/02-api/" class="dropdown-item">Protocol API</a>
</li>
                                    
<li>
    <a href="../../hello/03-pod/" class="dropdown-item">Pod Class</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Games <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../py421-solo/" class="dropdown-item">4.2.1 Solo</a>
</li>
                                    
<li>
    <a href="../py421-duo/" class="dropdown-item">4.2.1 Duo</a>
</li>
                                    
<li>
    <a href="../tictactoe/" class="dropdown-item">TicTacToe</a>
</li>
                                    
<li>
    <a href="../connect4/" class="dropdown-item">Connect4</a>
</li>
                                    
<li>
    <a href="../moveIt/" class="dropdown-item">MoveIt</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Learn AI <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../learn-ai/policy/" class="dropdown-item">Policy</a>
</li>
                                    
<li>
    <a href="../../learn-ai/qlearning/" class="dropdown-item">Q Learning</a>
</li>
                                    
<li>
    <a href="../../learn-ai/learn-model/" class="dropdown-item">Learn Model</a>
</li>
                                    
<li>
    <a href="../../learn-ai/scale-up/" class="dropdown-item">Scale-Up</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Do-it-Yourself <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../diy/newgame/" class="dropdown-item">New Game</a>
</li>
                                    
<li>
    <a href="../../diy/testdriven/" class="dropdown-item">Test-Driven</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../f.a.q/" class="nav-link">F.A.Q</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#risky" class="nav-link">Risky</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#try-the-game" class="nav-link">Try the game:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#initialize-an-autonomous-player" class="nav-link">Initialize an Autonomous Player</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#test-your-player" class="nav-link">Test your Player</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#customaize-your-ai" class="nav-link">Customaize your AI:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#confront-your-ai" class="nav-link">Confront your AI:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="risky">Risky</h1>
<p><strong>Risky</strong> is an <em>HackaGames</em> game.</p>
<p>It is a strategic turn-based game where two armies (or more) fights for a territory.</p>
<h2 id="try-the-game">Try the game:</h2>
<p>The <code>start-interactive</code> script starts the game with an interactive interface in a shell playing against an artificial player <code>playerFirstAI.py</code>.</p>
<pre><code class="language-sh">python3 hackagames/gameRisky/start-interactive
</code></pre>
<p>The world is composed by interconnected nodes forming a tabletop as, for instance:</p>
<pre><code class="language-txt">       .' '.
      |     |
       '. .3
      /     \
 .' '.       .' '.
|     |-----|     |
 '. .1       '. .2 
      \     /
       .' '.
      |     |
       '. .4
</code></pre>
<p>The 2 players are referenced as a player <em>A</em> and player <em>B</em> ; starting respectively in positions 1 and 2.
When an army is on a node, the information is presented as below:</p>
<pre><code class="language-txt"> .'A'.    # Player ID
|1- 12|   # army action and force
 '. .4    # node ID
</code></pre>
<p>In this example, an army of player <em>A</em> is on node <code>4</code>. The army has <code>1</code> action-point and is composed by <code>12</code> soldiers. </p>
<p>Each army has 2 main attributes:</p>
<ul>
<li>its action counter (the number of action it can perform - max 2)</li>
<li>its force (the size of the army - max 24)</li>
</ul>
<p>At its turn the player can make several actions (in the limit of action counters):</p>
<ul>
<li>Moving: <code>move X Y FORCE</code> to move <code>FORCE</code> units from cell <code>X</code> to cell <code>Y</code></li>
<li>Growing: <code>grow X</code> to grow the army on nodes <code>X</code>. The increase of the army is depending on the initial army size and the connections to occupied friend nodes.</li>
<li>Sleeping: <code>sleep</code> to increase the action counter by one for all the armies.</li>
</ul>
<p>To notice that a moving action that will move an army toward an adversarial node trigger a fight.
Iteratively, each force point of the attack and the defense has a chance to deal one damage.
Defenses have an increased chance than attack.
However if the attack is greater than the defense than each extra point count double.
The fight is running until one of the army is destroyed.</p>
<p>For instance, with a <code>move 1 2 10</code> with a defense of <code>8</code> on the node <code>2</code>, the fight will start by considering an attack force of <code>12</code> (<span class="arithmatex">\(2\times 10-8\)</span>) times 1 chance over 2 against a defense of <code>8</code> times 2 chances over 3.
The exact amount of damages at the end of the fight remains uncertain.</p>
<h2 id="initialize-an-autonomous-player">Initialize an Autonomous Player</h2>
<p>Into your workspace, we encourage you to create a new directory for your experiences linked to our tutorials (<code>tutos</code> for instance, aside of <code>hackagames</code> directory),
and to create your new <strong>Risky</strong> player in this directory.</p>
<pre><code class="language-sh">mkdir tutos
touch tutos/myRiskyPlayer.py
</code></pre>
<p>You now have to edit <code>myRiskyPlayer.py</code> script and create a <strong>Risky</strong> player.
The script must begin by importing hackagames elements (<code>hackapy</code> and the <code>Risky</code> <code>gameEngine</code>) and implement an <code>hackagames Abstract Player</code>.</p>
<p>To import <code>hackapy</code> and the <code>gameEngine</code> you have first to modify the python path resource to add your workspace directory (i.e. the directory including tutos in which your AI in positioned).</p>
<pre><code class="language-python"># Local HackaGame:
import sys
sys.path.insert( 1, __file__.split('tutos')[0] )

import hackagames.hackapy as hg
import hackagames.gameRisky.gameEngine as game
</code></pre>
<p>The first script we propose selects a random action and also requires the adequate python tool:</p>
<pre><code class="language-python">import random
</code></pre>
<p>Then your first player will inherit from hackay Abstract Player and implement the <code>4</code> player methods <code>wakeUp</code>, <code>perceive</code>, <code>decide</code> and <code>sleep</code> required to play any Hackagames's game :</p>
<pre><code class="language-python">class AutonomousPlayer( hg.AbsPlayer ) :

    # Player interface :
    def wakeUp(self, playerId, numberOfPlayers, gameConf):
        [...]

    def perceive(self, gameState):
        [...]

    def decide(self):
        [...]

    def sleep(self, result):
        [...]
</code></pre>
<p>A first version of <code>myRiskyPlayer.py</code> player could be a copy-paste of the <code>hackagames/gameRisky/playerFirstAI</code>, 
and your final first script would be:</p>
<pre><code class="language-python"># Local HackaGame:
import sys
sys.path.insert( 1, __file__.split('tutos')[0] )

import hackagames.hackapy as hg
import hackagames.gameRisky.gameEngine as game
import random

class AutonomousPlayer(hg.AbsPlayer) :

    # Player interface :
    def wakeUp(self, iPlayer, numberOfPlayers, gameConf):
        print( f'---\nwake-up player-{iPlayer} ({numberOfPlayers} players)')
        self.playerId= chr( ord(&quot;A&quot;)+iPlayer-1 )
        self.game= game.GameRisky().fromPod( gameConf )
        self.viewer= game.ViewerTerminal( self.game )

    def perceive(self, gameState):
        self.game.fromPod( gameState )
        self.viewer.print( self.playerId )

    def decide(self):
        actions= self.game.searchActions( self.playerId )
        action= random.choice( actions )
        if action[0] == 'move':
            action[3]= random.randint(1, action[3])
        action= ' '.join( [ str(x) for x in action ] )
        print( &quot;Do: &quot;+ action )
        return action

    def sleep(self, result):
        print( f'---\ngame end\nresult: {result}')
</code></pre>
<p>Here the gameEngine permit the player to instantiate a copy <code>self.game</code> of the game at the reached configuration.
It is first used to search for available actions in <code>decide</code> method and to get one at random.</p>
<h2 id="test-your-player">Test your Player</h2>
<p><em>HackaGames</em> is designed to work as a client-server architecture to make the game and the player completely independent.
However, it is also possible start a python game in a test mode for a player in a single process with a simple script.
Aside to <code>hackagames</code> and your <code>tutos</code> directories create your own launcher:</p>
<pre><code class="language-sh">touch launcherRisky.py
</code></pre>
<p>Edit the python script.
The code requires to import the game and the player and an opponent to your player.
then to instantiate them and to start <code>testPlayer</code> method:</p>
<pre><code class="language-python">#!env python3
from hackagames.gameRisky.gameEngine import GameRisky
from hackagames.gameRisky.playerFirstAI import AutonomousPlayer as Opponent
from tutos.myRiskyPlayer import AutonomousPlayer as Player

# Instanciate and start 1 games
game= GameRisky( 2, &quot;board-4&quot; )
player= Player()
opponent1= Opponent()
results= game.testPlayer( player, 100, [opponent1] )

print(results)
</code></pre>
<p>That it, you can execute your script: <code>python3 ./launcherRisky.py</code> which calls your player.
The second attribute in <code>testPlayer</code> method of <code>game</code> instance (<code>100</code> here) is the number of games the players will play before the process end.</p>
<p>The <code>game.testPlayer</code> method return the list game results.
We can now print and analyze the reached results (compute the average score for instance): </p>
<pre><code class="language-python"># Analysis
average= sum(results)/len(results)
print( f&quot;Average score: {average}&quot;)
</code></pre>
<p>The result should be very close to zero. It is the same AI...</p>
<h2 id="customaize-your-ai">Customaize your AI:</h2>
<p>To customize your AI you can use the game engine copy (cf. <a href="https://github.com/ktorz-net/hackagames/blob/master/gameRisky/gameEngine">risky.py</a>)</p>
<p>Somme of the available methods:</p>
<pre><code class="language-python">def update( self, board ): # Update the board from the perception.

def searchActions(self, playerId): # List all the current possible actions from the configuration of the armies

def cellIds(self): # return the list of cell identifiers

def edgesFrom(self, iCell): # return the list of connected cell identifiers from the iCell cell.

def armyOn(self, iCell) : # return an army as a Pod object, if an army is on the iCell cell (and False otherwise).

def playerLetter(self, iPlayer): # return the player letter (A, B, C ...) of the ith player (1, 2, ...)
</code></pre>
<p>An army is a <code>Pod</code> object where the owner is recorded in the status and the 2 attributes is for action counter and force :</p>
<pre><code class="language-python">for iCell in self.game.cellIds() :
    army= self.game.armyOn(iCell) # The army on the cell 1
    if army :
        owner= army.status()
        action= army.flag(1)
        force= army.flag(2)
        print( f&quot;Army-{owner} ({action}, {force}) on {iCells}&quot; )
</code></pre>
<p>The goal now is to compute that information in order to propose an AI winning the PlayerFirstAI.</p>
<h2 id="confront-your-ai">Confront your AI:</h2>
<p>In the launcher script, you can replace the imported <code>opponent</code> AI to an interactive interface.</p>
<pre><code class="language-python">from hackagames.gameRisky.gameEngine.players import PlayerShell as Opponent
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../javascripts/mathjax.js"></script>
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
