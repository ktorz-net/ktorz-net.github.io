<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Connect4 - HackaGames</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Connect4";
        var mkdocs_page_input_path = "games/connect4.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> HackaGames
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../../..">ktorz <</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">First-Steps</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../hello/install/">Install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hello/first-bot/">First Bot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hello/multi-player/">Multiplayer</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Games</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../py421/">Py4.2.1</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Connect4</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tictactoe/">TicTacToe</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tuto: Learning</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../learning/policy/">Policy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learning/qlearning/">Q-Learning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learning/speed-up/">Speed-up</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learning/model-based/">Model Based</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Under the hood</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../hood/api/">Protocol API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hood/pod/">Pod Class</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hood/newgame/">New Game</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hood/testdriven/">Test-Driven</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../resources/policy.zip"></a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">HackaGames</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Games</li>
      <li class="breadcrumb-item active">Connect4</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="connect4">Connect4</h1>
<p><strong>Connect4</strong> is a <em>HackaGames</em> game, A simple two-player game where each player tries to align 4 of their pieces.</p>
<h2 id="try-the-game">Try the game:</h2>
<p>The <code>play/connect4.py</code> script starts the game with an interactive interface in a shell.</p>
<pre><code class="language-sh">python3 hackagames/play/connect4.py
</code></pre>
<p>The player can perform one and only one action at its turn, and the game stops automatically with a winner or when no more pieces can be set on the grid.</p>
<p>The actions consist of positioning a player's piece on one of the grid columns.
There are 7 possible actions: <code>A</code>, <code>B</code>, <code>C</code>, <code>D</code>, <code>E</code>, <code>F</code> and <code>G</code> for the corresponding column.</p>
<p>Example of the game at some point: </p>
<pre><code class="language-txt">  A   B   C   D   E   F   G
|   |   |   |   |   |   |   |
|   |   |   |   |   |   |   |
|   |   |   |   |   |   |   |
|   |   |   | O |   |   |   |
|   |   | X | X |   |   |   |
| X | O | O | O |   |   | X |
-----------------------------
you: O
</code></pre>
<p>First player play 'O' and the second 'X'.
The first player aligning 4 of its pieces, in any direction win the game.</p>
<h2 id="initialize-an-autonomous-player">Initialize an Autonomous Player</h2>
<p>If you are implementing your first bot, please follow the <a href="../hello/first-bot">first bot</a> tutorial on Py421 game.</p>
<p>The <code>wakeUp</code> method informs about the mode of the game, the <code>perception</code> of the status of the grid and the possibilities of actions.
The hackagames <em>Connect4</em> package includes a very useful <em>Grid</em> class to manipulate the game state.</p>
<p>A minimal random <em>Bot</em> can be implemented in a few lines: </p>
<pre><code class="language-python">from hacka.games.connect4.grid import Grid
import random

class Bot :
    # Player interface :
    def wakeUp(self, playerId, numberOfPlayers, gamePod):
        assert( gamePod.family() == 'Connect4')
        self._playerId= playerId
        self._grid= Grid()

    def perceive(self, gameState):
        # update the game state:
        self._grid.fromPod( gameState )

    def decide(self):
        options = self._grid.possibilities()
        return random.choice( options )

    def sleep(self, result):
        pass
</code></pre>
<p>And can be tested thanks to a very simple launcher script:</p>
<pre><code class="language-python"># Setup a game:
from hacka.games.connect4 import GameConnect4 as Game
from hacka.games.connect4.firstBot import Bot as Opponent

# Setup your bot:
from myRandomBot import Bot

bot= Bot()
oppo= Opponent()

# Instanciate and start 100 games
game= Game()
results= game.test2Players( bot, oppo, 1000 )

# Analyze the result
print( f&quot;Average score: {sum(results[0])/len(results[0])} vs {sum(results[1])/len(results[1])}&quot; )
</code></pre>
<p>At this point, the results comparing the 2 Bot would be very close. The 2 bots have the same behavior.
To notice that, the list of actions do not filter positions already taken. However in case of wrong actions, the game will ask the player for a second call.</p>
<h2 id="customaize-your-bot">Customaize your Bot:</h2>
<p>You can explore the grid to select the best action possible.
Some useful <em>Gird</em> methods:</p>
<ul>
<li><code>columnSize(self)</code>: The number of columns (<em>7</em> in classical configuration)</li>
<li><code>heightMax(self)</code>: The height of the grid (<em>6</em> position per column in classical configuration)</li>
<li><code>height(self, iColumn)</code>: the actual height of the <em>iColumn</em> column (considered the played piece in this column)</li>
<li><code>column(self, iColumn)</code>: a list of integers modeling the <em>iColumn</em> column pieces (<em>0</em> no player, <em>1</em> player <em>1</em> and <em>2</em> player <em>2</em>)</li>
<li><code>position(self, c, h)</code>: The value at column <em>c</em> height <em>h</em> (<em>0</em>, <em>1</em> or <em>2</em>).</li>
</ul>
<p>To test a move you will need:</p>
<ul>
<li><code>copy(self)</code>: returning a deep copy of the grid (before to make some changes)</li>
<li><code>playerPlay(self, iPlayer, aLetter)</code>: to alter the grid considering that player <em>iPlayer</em> play on the <em>aLetter</em> column.</li>
<li><code>winner(self)</code>: returns the player Id winning the game if 4 of his pieces are aligned.</li>
<li><code>possibilities(self)</code>: returns the list of possible move (letters), if the columns are not full.</li>
</ul>
<p>To notice that you can move from column letter to the column identifier and vice versa with <code>chr</code> (a char from an integer) and <code>ord</code> (the interger code of a char).
For instance:</p>
<pre><code class="language-python">iColumn= ord(aLetter)-ord('A')
aLetter= chr( ord('A')+iColumn )
</code></pre>
<hr />
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../py421/" class="btn btn-neutral float-left" title="Py4.2.1"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../tictactoe/" class="btn btn-neutral float-right" title="TicTacToe">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../py421/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../tictactoe/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../javascripts/mathjax.js"></script>
      <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
